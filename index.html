<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website with Login and Signup</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }

        header {
            background: #333;
            color: #fff;
            padding: 10px 20px;
            text-align: center;
            position: relative;
        }

        #user-info {
            position: absolute;
            top: 10px;
            right: 20px;
            color: #fff;
            font-size: 16px;
        }

        nav {
            text-align: center;
            margin: 20px;
        }

        nav a {
            margin: 0 15px;
            text-decoration: none;
            color: #333;
            font-size: 18px;
        }

        .container {
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        form {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 8px;
            font-weight: bold;
        }

        input {
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button {
            background: #333;
            color: #fff;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 4px;
        }

        button:hover {
            background: #555;
        }

        .home-content {
            text-align: center;
        }

        .hidden {
            display: none;
        }

        #moderation-panel {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }

        .account-list {
            flex: 1;
            padding: 10px;
            background: #f9f9f9;
            border-right: 1px solid #ccc;
        }

        .account-list h3 {
            text-align: center;
        }

        .edit-form {
            flex: 2;
            padding: 10px;
        }

        .edit-form label {
            margin-top: 10px;
        }

        .edit-form button {
            margin-top: 10px;
        }
    </style>
</head>
<body>

<header>
    <h1>Welcome to My Website</h1>
    <div id="user-info" class="hidden">Username: <span id="display-username"></span> | Balance: $<span id="display-balance"></span></div>
</header>

<nav>
    <a href="#" onclick="showSection('signup')">Sign Up</a>
    <a href="#" onclick="showSection('login')">Login</a>
    <a href="#" onclick="showSection('home')">Home</a>
    <a href="#" onclick="showSection('moderation')" id="moderation-link" class="hidden">Moderation Panel</a>
</nav>

<div id="signup" class="container">
    <h2>Sign Up</h2>
    <form onsubmit="handleSignup(event)">
        <label for="username">Username</label>
        <input type="text" id="username" name="username" required>

        <label for="email">Email</label>
        <input type="email" id="email" name="email" required>

        <label for="password">Password</label>
        <input type="password" id="password" name="password" required>

        <button type="submit">Sign Up</button>
    </form>
</div>

<div id="login" class="container hidden">
    <h2>Login</h2>
    <form onsubmit="handleLogin(event)">
        <label for="login-username">Username</label>
        <input type="text" id="login-username" name="login-username" required>

        <label for="login-password">Password</label>
        <input type="password" id="login-password" name="login-password" required>

        <button type="submit">Login</button>
    </form>
</div>

<div id="home" class="container hidden">
    <div class="home-content">
        <h2>Home Page</h2>
        <p>Welcome to the home page! Use the navigation menu to sign up or log in.</p>
    </div>
</div>

<div id="moderation" class="container hidden">
    <h2>Moderation Panel</h2>
    <div id="moderation-panel">
        <div class="account-list">
            <h3>Existing Accounts</h3>
            <ul id="account-list"></ul>
        </div>
        <div class="edit-form">
            <h3>Edit Account Balance</h3>
            <form onsubmit="handleEditBalance(event)">
                <label for="edit-username">Username</label>
                <input type="text" id="edit-username" required>

                <label for="edit-balance">New Balance</label>
                <input type="number" id="edit-balance" required>

                <button type="submit">Update Balance</button>
            </form>

            <h3>Ban Account</h3>
            <form onsubmit="handleBanAccount(event)">
                <label for="ban-username">Username</label>
                <input type="text" id="ban-username" required>

                <button type="submit">Ban User</button>
            </form>
        </div>
    </div>
</div>

<script>
    const accountsKey = "accountsData";
    const bansKey = "bannedAccounts";

    let accounts = {
        owner: { username: "Owner", password: "ownerpass", role: "Owner", balance: 1000 },
        admins: [
            { username: "Admin1", password: "admin1pass", role: "Admin", balance: 500 },
            { username: "Admin2", password: "admin2pass", role: "Admin", balance: 500 },
            { username: "Admin3", password: "admin3pass", role: "Admin", balance: 500 }
        ],
        users: []
    };

    let bannedAccounts = [];
    let currentUser = null;

    // Save accounts and bans to localStorage
    function saveData() {
        localStorage.setItem(accountsKey, JSON.stringify(accounts));
        localStorage.setItem(bansKey, JSON.stringify(bannedAccounts));
    }

    // Load accounts and bans from localStorage
    function loadData() {
        const storedAccounts = localStorage.getItem(accountsKey);
        const storedBans = localStorage.getItem(bansKey);

        if (storedAccounts) {
            accounts = JSON.parse(storedAccounts);
        }

        if (storedBans) {
            bannedAccounts = JSON.parse(storedBans);
        }
    }

    function showSection(sectionId) {
        const sections = document.querySelectorAll('.container');
        sections.forEach(section => section.classList.add('hidden'));
        document.getElementById(sectionId).classList.remove('hidden');

        if (sectionId === 'moderation') {
            populateAccountList();
        }
    }

    function handleSignup(event) {
        event.preventDefault();
        const username = document.getElementById('username').value;
        const balance = 100; // Default starting balance
        const newUser = { username, balance, role: "User" };
        accounts.users.push(newUser);
        saveData();
        currentUser = newUser;
        updateUserInfo();
        showSection('home');
    }

    function handleLogin(event) {
        event.preventDefault();
        const username = document.getElementById('login-username').value;
        const password = document.getElementById('login-password').value;

        if (bannedAccounts.includes(username)) {
            alert("This account has been banned.");
            return;
        }

        if (username === accounts.owner.username && password === accounts.owner.password) {
            currentUser = accounts.owner;
            document.getElementById('moderation-link').classList.remove('hidden');
        } else {
            currentUser = accounts.admins.find(
                admin => admin.username === username && admin.password === password
            );
        }

        if (!currentUser) {
            currentUser = accounts.users.find(user => user.username === username);
        }

        if (currentUser) {
            updateUserInfo();
            showSection('home');
        } else {
            alert("Invalid username or password");
        }
    }

    function updateUserInfo() {
        if (currentUser) {
            document.getElementById('display-username').textContent = `${currentUser.username} (${currentUser.role})`;
            document.getElementById('display-balance').textContent = currentUser.balance;
            document.getElementById('user-info').classList.remove('hidden');
        }
    }

    function populateAccountList() {
        const list = document.getElementById('account-list');
        list.innerHTML = '';

        const allAccounts = [accounts.owner, ...accounts.admins, ...accounts.users];
        allAccounts.forEach(account => {
            const li = document.createElement('li');
            li.textContent = `${account.username} (${account.role}) - $${account.balance}`;
            list.appendChild(li);
        });
    }

    function handleEditBalance(event) {
        event.preventDefault();
        const username = document.getElementById('edit-username').value;
        const newBalance = parseFloat(document.getElementById('edit-balance').value);

        const allAccounts = [accounts.owner, ...accounts.admins, ...accounts.users];
        const account = allAccounts.find(acc => acc.username === username);

        if (account) {
            account.balance = newBalance;
            saveData();
            populateAccountList();
            alert(`Updated balance for ${username} to $${newBalance}`);
        } else {
            alert(`Account with username ${username} not found.`);
        }
    }

    function handleBanAccount(event) {
        event.preventDefault();
        const username = document.getElementById('ban-username').value;

        const allAccounts = [accounts.owner, ...accounts.admins, ...accounts.users];
        const account = allAccounts.find(acc => acc.username === username);

        if (account) {
            bannedAccounts.push(username);
            saveData();
            alert(`Successfully banned ${username}`);
        } else {
            alert(`Account with username ${username} not found.`);
        }
    }

    // Load data from localStorage on page load
    window.onload = function () {
        loadData();
        populateAccountList();
    };
</script>


</body>
</html>
